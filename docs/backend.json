{
  "entities": {
    "Session": {
      "title": "Session",
      "type": "object",
      "description": "Merepresentasikan satu sesi permainan. Menyimpan informasi global seperti rotasi, tema, dan status.",
      "properties": {
        "rotationDirection": { "type": "string", "enum": ["kanan", "kiri"] },
        "theme": { "type": "string", "enum": ["light", "dark"] },
        "status": { "type": "string", "enum": ["active", "locked"] },
        "lastRoundNumber": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["rotationDirection", "status", "lastRoundNumber", "createdAt"]
    },
    "Player": {
      "title": "Player",
      "type": "object",
      "description": "Mewakili seorang pemain dalam sebuah sesi.",
      "properties": {
        "name": { "type": "string" },
        "totalPoints": { "type": "number" },
        "addedAt": { "type": "string", "format": "date-time" },
        "order": { "type": "number" }
      },
      "required": ["name", "totalPoints", "addedAt"]
    },
    "Round": {
      "title": "Round",
      "type": "object",
      "description": "Mewakili satu ronde dalam sebuah sesi permainan.",
      "properties": {
        "roundNumber": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["roundNumber", "createdAt"]
    },
    "Score": {
      "title": "Score",
      "type": "object",
      "description": "Mewakili satu entri skor dalam sebuah ronde.",
      "properties": {
        "playerId": { "type": "string" },
        "points": { "type": "number" },
        "inputType": { "type": "string", "enum": ["shortcut", "manual"] },
        "actionLabel": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["playerId", "points", "timestamp"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/sessions/{sessionId}",
        "definition": {
          "entityName": "Session",
          "schema": { "$ref": "#/entities/Session" },
          "description": "Dokumen utama untuk setiap sesi permainan."
        }
      },
      {
        "path": "/sessions/{sessionId}/players/{playerId}",
        "definition": {
          "entityName": "Player",
          "schema": { "$ref": "#/entities/Player" },
          "description": "Subkoleksi untuk menyimpan data pemain dalam sesi tersebut."
        }
      },
      {
        "path": "/sessions/{sessionId}/rounds/{roundId}",
        "definition": {
          "entityName": "Round",
          "schema": { "$ref": "#/entities/Round" },
          "description": "Subkoleksi untuk mengelompokkan skor per ronde."
        }
      },
      {
        "path": "/sessions/{sessionId}/rounds/{roundId}/scores/{scoreId}",
        "definition": {
          "entityName": "Score",
          "schema": { "$ref": "#/entities/Score" },
          "description": "Subkoleksi untuk setiap entri skor dalam satu ronde."
        }
      }
    ],
    "reasoning": "Struktur data dirancang di sekitar konsep 'session' untuk merangkum setiap permainan. Ini memungkinkan beberapa permainan berjalan secara bersamaan (fitur masa depan) dan menjaga data tetap terorganisir. Subkoleksi untuk players, rounds, dan scores memastikan skalabilitas dan query yang efisien. Menyimpan totalPoints di level pemain mempercepat pemuatan papan peringkat. Memisahkan 'rounds' memungkinkan pengelompokan riwayat yang bersih. 'scores' yang terperinci memungkinkan analisis dan fitur undo yang fleksibel."
  }
}
