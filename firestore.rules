
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if a user is signed in
    function isSignedIn() {
      return request.auth != null;
    }

    /**
     * @description
     *   Allows signed-in users to read player data, which is essential for
     *   the scoreboard functionality. Write operations (create, update, delete)
     *   are also restricted to signed-in users to maintain data integrity.
     *   This prevents anonymous or unauthorized modifications.
     * @path
     *   /players/{playerId}
     * @allow
     *   A signed-in user can list all player documents to display the
     *   scoreboard and get individual player data.
     * @allow
     *   A signed-in user can create, update, or delete player documents.
     * @deny
     *   A non-authenticated user attempts to read or write player data.
     * @principle
     *   Enforces authentication for all interactions with player data,
     *   ensuring that only recognized users can view or modify the scoreboard.
     */
    match /players/{playerId} {
      allow read, write: if isSignedIn();
    }
  }
}
