
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if a user is signed in
    function isSignedIn() {
      return request.auth != null;
    }

    /**
     * @description
     *   The `players` collection can be read by any signed-in user to display
     *   the scoreboard. Write operations (create, update, delete) are also
     *   restricted to signed-in users to maintain data integrity.
     * @path
     *   /players/{playerId}
     * @allow
     *   - `list`: Signed-in users can list all players for the scoreboard.
     *   - `get`: Signed-in users can retrieve individual player data.
     *   - `write`: Signed-in users can create, update, or delete player documents.
     * @deny
     *   Unauthenticated users cannot read or write any player data.
     * @principle
     *   Enforces authentication for all interactions with player data,
     *   ensuring that only recognized users can view or modify the scoreboard.
     */
    match /players/{playerId} {
      allow list, get, write: if isSignedIn();
    }
  }
}
